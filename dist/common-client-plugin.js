var Pt=Object.defineProperty;var je=Object.getOwnPropertySymbols;var Nt=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable;var Me=(e,t,n)=>t in e?Pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U=(e,t)=>{for(var n in t||(t={}))Nt.call(t,n)&&Me(e,n,t[n]);if(je)for(var n of je(t))kt.call(t,n)&&Me(e,n,t[n]);return e};var It=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var St=It((tr,Et)=>{"use strict";function Ze(e,t){return function(){return e.apply(t,arguments)}}var{toString:Lt}=Object.prototype,{getPrototypeOf:ke}=Object,ge=(e=>t=>{let n=Lt.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),q=e=>(e=e.toLowerCase(),t=>ge(t)===e),ye=e=>t=>typeof t===e,{isArray:oe}=Array,ae=ye("undefined");function Dt(e){return e!==null&&!ae(e)&&e.constructor!==null&&!ae(e.constructor)&&_(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}var et=q("ArrayBuffer");function _t(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&et(e.buffer),t}var Ft=ye("string"),_=ye("function"),tt=ye("number"),be=e=>e!==null&&typeof e=="object",Ut=e=>e===!0||e===!1,pe=e=>{if(ge(e)!=="object")return!1;let t=ke(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ht=q("Date"),jt=q("File"),Mt=q("Blob"),qt=q("FileList"),zt=e=>be(e)&&_(e.pipe),$t=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||_(e.append)&&((t=ge(e))==="formdata"||t==="object"&&_(e.toString)&&e.toString()==="[object FormData]"))},Jt=q("URLSearchParams"),Wt=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ce(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),oe(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{let i=n?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length,c;for(r=0;r<s;r++)c=i[r],t.call(null,e[c],c,e)}}function nt(e,t){t=t.toLowerCase();let n=Object.keys(e),r=n.length,o;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}var rt=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),ot=e=>!ae(e)&&e!==rt;function Oe(){let{caseless:e}=ot(this)&&this||{},t={},n=(r,o)=>{let i=e&&nt(t,o)||o;pe(t[i])&&pe(r)?t[i]=Oe(t[i],r):pe(r)?t[i]=Oe({},r):oe(r)?t[i]=r.slice():t[i]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&ce(arguments[r],n);return t}var Vt=(e,t,n,{allOwnKeys:r}={})=>(ce(t,(o,i)=>{n&&_(o)?e[i]=Ze(o,n):e[i]=o},{allOwnKeys:r}),e),Kt=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Gt=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Xt=(e,t,n,r)=>{let o,i,s,c={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)s=o[i],(!r||r(s,e,t))&&!c[s]&&(t[s]=e[s],c[s]=!0);e=n!==!1&&ke(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Yt=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;let r=e.indexOf(t,n);return r!==-1&&r===n},Qt=e=>{if(!e)return null;if(oe(e))return e;let t=e.length;if(!tt(t))return null;let n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Zt=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ke(Uint8Array)),en=(e,t)=>{let r=(e&&e[Symbol.iterator]).call(e),o;for(;(o=r.next())&&!o.done;){let i=o.value;t.call(e,i[0],i[1])}},tn=(e,t)=>{let n,r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},nn=q("HTMLFormElement"),rn=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),qe=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),on=q("RegExp"),st=(e,t)=>{let n=Object.getOwnPropertyDescriptors(e),r={};ce(n,(o,i)=>{let s;(s=t(o,i,e))!==!1&&(r[i]=s||o)}),Object.defineProperties(e,r)},sn=e=>{st(e,(t,n)=>{if(_(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;let r=e[n];if(!!_(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},an=(e,t)=>{let n={},r=o=>{o.forEach(i=>{n[i]=!0})};return oe(e)?r(e):r(String(e).split(t)),n},ln=()=>{},cn=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Re="abcdefghijklmnopqrstuvwxyz",ze="0123456789",it={DIGIT:ze,ALPHA:Re,ALPHA_DIGIT:Re+Re.toUpperCase()+ze},un=(e=16,t=it.ALPHA_DIGIT)=>{let n="",{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function dn(e){return!!(e&&_(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}var fn=e=>{let t=new Array(10),n=(r,o)=>{if(be(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[o]=r;let i=oe(r)?[]:{};return ce(r,(s,c)=>{let y=n(s,o+1);!ae(y)&&(i[c]=y)}),t[o]=void 0,i}}return r};return n(e,0)},pn=q("AsyncFunction"),hn=e=>e&&(be(e)||_(e))&&_(e.then)&&_(e.catch),a={isArray:oe,isArrayBuffer:et,isBuffer:Dt,isFormData:$t,isArrayBufferView:_t,isString:Ft,isNumber:tt,isBoolean:Ut,isObject:be,isPlainObject:pe,isUndefined:ae,isDate:Ht,isFile:jt,isBlob:Mt,isRegExp:on,isFunction:_,isStream:zt,isURLSearchParams:Jt,isTypedArray:Zt,isFileList:qt,forEach:ce,merge:Oe,extend:Vt,trim:Wt,stripBOM:Kt,inherits:Gt,toFlatObject:Xt,kindOf:ge,kindOfTest:q,endsWith:Yt,toArray:Qt,forEachEntry:en,matchAll:tn,isHTMLForm:nn,hasOwnProperty:qe,hasOwnProp:qe,reduceDescriptors:st,freezeMethods:sn,toObjectSet:an,toCamelCase:rn,noop:ln,toFiniteNumber:cn,findKey:nt,global:rt,isContextDefined:ot,ALPHABET:it,generateString:un,isSpecCompliantForm:dn,toJSONObject:fn,isAsyncFn:pn,isThenable:hn};function E(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}a.inherits(E,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:a.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var at=E.prototype,lt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{lt[e]={value:e}});Object.defineProperties(E,lt);Object.defineProperty(at,"isAxiosError",{value:!0});E.from=(e,t,n,r,o,i)=>{let s=Object.create(at);return a.toFlatObject(e,s,function(y){return y!==Error.prototype},c=>c!=="isAxiosError"),E.call(s,e.message,t,n,r,o),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};var mn=null;function Ce(e){return a.isPlainObject(e)||a.isArray(e)}function ct(e){return a.endsWith(e,"[]")?e.slice(0,-2):e}function $e(e,t,n){return e?e.concat(t).map(function(o,i){return o=ct(o),!n&&i?"["+o+"]":o}).join(n?".":""):t}function gn(e){return a.isArray(e)&&!e.some(Ce)}var yn=a.toFlatObject(a,{},null,function(t){return/^is[A-Z]/.test(t)});function we(e,t,n){if(!a.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=a.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,T){return!a.isUndefined(T[f])});let r=n.metaTokens,o=n.visitor||d,i=n.dots,s=n.indexes,y=(n.Blob||typeof Blob<"u"&&Blob)&&a.isSpecCompliantForm(t);if(!a.isFunction(o))throw new TypeError("visitor must be a function");function b(h){if(h===null)return"";if(a.isDate(h))return h.toISOString();if(!y&&a.isBlob(h))throw new E("Blob is not supported. Use a Buffer instead.");return a.isArrayBuffer(h)||a.isTypedArray(h)?y&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function d(h,f,T){let C=h;if(h&&!T&&typeof h=="object"){if(a.endsWith(f,"{}"))f=r?f:f.slice(0,-2),h=JSON.stringify(h);else if(a.isArray(h)&&gn(h)||(a.isFileList(h)||a.endsWith(f,"[]"))&&(C=a.toArray(h)))return f=ct(f),C.forEach(function(H,Fe){!(a.isUndefined(H)||H===null)&&t.append(s===!0?$e([f],Fe,i):s===null?f:f+"[]",b(H))}),!1}return Ce(h)?!0:(t.append($e(T,f,i),b(h)),!1)}let l=[],A=Object.assign(yn,{defaultVisitor:d,convertValue:b,isVisitable:Ce});function v(h,f){if(!a.isUndefined(h)){if(l.indexOf(h)!==-1)throw Error("Circular reference detected in "+f.join("."));l.push(h),a.forEach(h,function(C,z){(!(a.isUndefined(C)||C===null)&&o.call(t,C,a.isString(z)?z.trim():z,f,A))===!0&&v(C,f?f.concat(z):[z])}),l.pop()}}if(!a.isObject(e))throw new TypeError("data must be an object");return v(e),t}function Je(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Ie(e,t){this._pairs=[],e&&we(e,this,t)}var ut=Ie.prototype;ut.append=function(t,n){this._pairs.push([t,n])};ut.toString=function(t){let n=t?function(r){return t.call(this,r,Je)}:Je;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function bn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function dt(e,t,n){if(!t)return e;let r=n&&n.encode||bn,o=n&&n.serialize,i;if(o?i=o(t,n):i=a.isURLSearchParams(t)?t.toString():new Ie(t,n).toString(r),i){let s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}var Be=class{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){a.forEach(this.handlers,function(r){r!==null&&t(r)})}},We=Be,ft={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},wn=typeof URLSearchParams<"u"?URLSearchParams:Ie,En=typeof FormData<"u"?FormData:null,Sn=typeof Blob<"u"?Blob:null,Rn={isBrowser:!0,classes:{URLSearchParams:wn,FormData:En,Blob:Sn},protocols:["http","https","file","blob","url","data"]},pt=typeof window<"u"&&typeof document<"u",xn=(e=>pt&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),An=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Tn=Object.freeze({__proto__:null,hasBrowserEnv:pt,hasStandardBrowserWebWorkerEnv:An,hasStandardBrowserEnv:xn}),M=U(U({},Tn),Rn);function On(e,t){return we(e,new M.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,i){return M.isNode&&a.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function Cn(e){return a.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Bn(e){let t={},n=Object.keys(e),r,o=n.length,i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}function ht(e){function t(n,r,o,i){let s=n[i++];if(s==="__proto__")return!0;let c=Number.isFinite(+s),y=i>=n.length;return s=!s&&a.isArray(o)?o.length:s,y?(a.hasOwnProp(o,s)?o[s]=[o[s],r]:o[s]=r,!c):((!o[s]||!a.isObject(o[s]))&&(o[s]=[]),t(n,r,o[s],i)&&a.isArray(o[s])&&(o[s]=Bn(o[s])),!c)}if(a.isFormData(e)&&a.isFunction(e.entries)){let n={};return a.forEachEntry(e,(r,o)=>{t(Cn(r),o,n,0)}),n}return null}function vn(e,t,n){if(a.isString(e))try{return(t||JSON.parse)(e),a.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}var Le={transitional:ft,adapter:["xhr","http"],transformRequest:[function(t,n){let r=n.getContentType()||"",o=r.indexOf("application/json")>-1,i=a.isObject(t);if(i&&a.isHTMLForm(t)&&(t=new FormData(t)),a.isFormData(t))return o?JSON.stringify(ht(t)):t;if(a.isArrayBuffer(t)||a.isBuffer(t)||a.isStream(t)||a.isFile(t)||a.isBlob(t))return t;if(a.isArrayBufferView(t))return t.buffer;if(a.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return On(t,this.formSerializer).toString();if((c=a.isFileList(t))||r.indexOf("multipart/form-data")>-1){let y=this.env&&this.env.FormData;return we(c?{"files[]":t}:t,y&&new y,this.formSerializer)}}return i||o?(n.setContentType("application/json",!1),vn(t)):t}],transformResponse:[function(t){let n=this.transitional||Le.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(t&&a.isString(t)&&(r&&!this.responseType||o)){let s=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(c){if(s)throw c.name==="SyntaxError"?E.from(c,E.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:M.classes.FormData,Blob:M.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};a.forEach(["delete","get","head","post","put","patch"],e=>{Le.headers[e]={}});var De=Le,Pn=a.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Nn=e=>{let t={},n,r,o;return e&&e.split(`
`).forEach(function(s){o=s.indexOf(":"),n=s.substring(0,o).trim().toLowerCase(),r=s.substring(o+1).trim(),!(!n||t[n]&&Pn[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Ve=Symbol("internals");function ie(e){return e&&String(e).trim().toLowerCase()}function he(e){return e===!1||e==null?e:a.isArray(e)?e.map(he):String(e)}function kn(e){let t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}var In=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function xe(e,t,n,r,o){if(a.isFunction(r))return r.call(this,t,n);if(o&&(t=n),!!a.isString(t)){if(a.isString(r))return t.indexOf(r)!==-1;if(a.isRegExp(r))return r.test(t)}}function Ln(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Dn(e,t){let n=a.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(o,i,s){return this[r].call(this,t,o,i,s)},configurable:!0})})}var te=class{constructor(t){t&&this.set(t)}set(t,n,r){let o=this;function i(c,y,b){let d=ie(y);if(!d)throw new Error("header name must be a non-empty string");let l=a.findKey(o,d);(!l||o[l]===void 0||b===!0||b===void 0&&o[l]!==!1)&&(o[l||y]=he(c))}let s=(c,y)=>a.forEach(c,(b,d)=>i(b,d,y));return a.isPlainObject(t)||t instanceof this.constructor?s(t,n):a.isString(t)&&(t=t.trim())&&!In(t)?s(Nn(t),n):t!=null&&i(n,t,r),this}get(t,n){if(t=ie(t),t){let r=a.findKey(this,t);if(r){let o=this[r];if(!n)return o;if(n===!0)return kn(o);if(a.isFunction(n))return n.call(this,o,r);if(a.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ie(t),t){let r=a.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||xe(this,this[r],r,n)))}return!1}delete(t,n){let r=this,o=!1;function i(s){if(s=ie(s),s){let c=a.findKey(r,s);c&&(!n||xe(r,r[c],c,n))&&(delete r[c],o=!0)}}return a.isArray(t)?t.forEach(i):i(t),o}clear(t){let n=Object.keys(this),r=n.length,o=!1;for(;r--;){let i=n[r];(!t||xe(this,this[i],i,t,!0))&&(delete this[i],o=!0)}return o}normalize(t){let n=this,r={};return a.forEach(this,(o,i)=>{let s=a.findKey(r,i);if(s){n[s]=he(o),delete n[i];return}let c=t?Ln(i):String(i).trim();c!==i&&delete n[i],n[c]=he(o),r[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let n=Object.create(null);return a.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=t&&a.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){let r=new this(t);return n.forEach(o=>r.set(o)),r}static accessor(t){let r=(this[Ve]=this[Ve]={accessors:{}}).accessors,o=this.prototype;function i(s){let c=ie(s);r[c]||(Dn(o,s),r[c]=!0)}return a.isArray(t)?t.forEach(i):i(t),this}};te.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);a.reduceDescriptors(te.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});a.freezeMethods(te);var V=te;function Ae(e,t){let n=this||De,r=t||n,o=V.from(r.headers),i=r.data;return a.forEach(e,function(c){i=c.call(n,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}function mt(e){return!!(e&&e.__CANCEL__)}function ue(e,t,n){E.call(this,e==null?"canceled":e,E.ERR_CANCELED,t,n),this.name="CanceledError"}a.inherits(ue,E,{__CANCEL__:!0});function _n(e,t,n){let r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new E("Request failed with status code "+n.status,[E.ERR_BAD_REQUEST,E.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}var Fn=M.hasStandardBrowserEnv?{write(e,t,n,r,o,i){let s=[e+"="+encodeURIComponent(t)];a.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),a.isString(r)&&s.push("path="+r),a.isString(o)&&s.push("domain="+o),i===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){let t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Un(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Hn(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function gt(e,t){return e&&!Un(t)?Hn(e,t):t}var jn=M.hasStandardBrowserEnv?function(){let t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),r;function o(i){let s=i;return t&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=o(window.location.href),function(s){let c=a.isString(s)?o(s):s;return c.protocol===r.protocol&&c.host===r.host}}():function(){return function(){return!0}}();function Mn(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function qn(e,t){e=e||10;let n=new Array(e),r=new Array(e),o=0,i=0,s;return t=t!==void 0?t:1e3,function(y){let b=Date.now(),d=r[i];s||(s=b),n[o]=y,r[o]=b;let l=i,A=0;for(;l!==o;)A+=n[l++],l=l%e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),b-s<t)return;let v=d&&b-d;return v?Math.round(A*1e3/v):void 0}}function Ke(e,t){let n=0,r=qn(50,250);return o=>{let i=o.loaded,s=o.lengthComputable?o.total:void 0,c=i-n,y=r(c),b=i<=s;n=i;let d={loaded:i,total:s,progress:s?i/s:void 0,bytes:c,rate:y||void 0,estimated:y&&s&&b?(s-i)/y:void 0,event:o};d[t?"download":"upload"]=!0,e(d)}}var zn=typeof XMLHttpRequest<"u",$n=zn&&function(e){return new Promise(function(n,r){let o=e.data,i=V.from(e.headers).normalize(),{responseType:s,withXSRFToken:c}=e,y;function b(){e.cancelToken&&e.cancelToken.unsubscribe(y),e.signal&&e.signal.removeEventListener("abort",y)}let d;if(a.isFormData(o)){if(M.hasStandardBrowserEnv||M.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((d=i.getContentType())!==!1){let[f,...T]=d?d.split(";").map(C=>C.trim()).filter(Boolean):[];i.setContentType([f||"multipart/form-data",...T].join("; "))}}let l=new XMLHttpRequest;if(e.auth){let f=e.auth.username||"",T=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(f+":"+T))}let A=gt(e.baseURL,e.url);l.open(e.method.toUpperCase(),dt(A,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function v(){if(!l)return;let f=V.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),C={data:!s||s==="text"||s==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:f,config:e,request:l};_n(function(H){n(H),b()},function(H){r(H),b()},C),l=null}if("onloadend"in l?l.onloadend=v:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(v)},l.onabort=function(){!l||(r(new E("Request aborted",E.ECONNABORTED,e,l)),l=null)},l.onerror=function(){r(new E("Network Error",E.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let T=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",C=e.transitional||ft;e.timeoutErrorMessage&&(T=e.timeoutErrorMessage),r(new E(T,C.clarifyTimeoutError?E.ETIMEDOUT:E.ECONNABORTED,e,l)),l=null},M.hasStandardBrowserEnv&&(c&&a.isFunction(c)&&(c=c(e)),c||c!==!1&&jn(A))){let f=e.xsrfHeaderName&&e.xsrfCookieName&&Fn.read(e.xsrfCookieName);f&&i.set(e.xsrfHeaderName,f)}o===void 0&&i.setContentType(null),"setRequestHeader"in l&&a.forEach(i.toJSON(),function(T,C){l.setRequestHeader(C,T)}),a.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),s&&s!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",Ke(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",Ke(e.onUploadProgress)),(e.cancelToken||e.signal)&&(y=f=>{!l||(r(!f||f.type?new ue(null,e,l):f),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(y),e.signal&&(e.signal.aborted?y():e.signal.addEventListener("abort",y)));let h=Mn(A);if(h&&M.protocols.indexOf(h)===-1){r(new E("Unsupported protocol "+h+":",E.ERR_BAD_REQUEST,e));return}l.send(o||null)})},ve={http:mn,xhr:$n};a.forEach(ve,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});var Ge=e=>`- ${e}`,Jn=e=>a.isFunction(e)||e===null||e===!1,yt={getAdapter:e=>{e=a.isArray(e)?e:[e];let{length:t}=e,n,r,o={};for(let i=0;i<t;i++){n=e[i];let s;if(r=n,!Jn(n)&&(r=ve[(s=String(n)).toLowerCase()],r===void 0))throw new E(`Unknown adapter '${s}'`);if(r)break;o[s||"#"+i]=r}if(!r){let i=Object.entries(o).map(([c,y])=>`adapter ${c} `+(y===!1?"is not supported by the environment":"is not available in the build")),s=t?i.length>1?`since :
`+i.map(Ge).join(`
`):" "+Ge(i[0]):"as no adapter specified";throw new E("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:ve};function Te(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ue(null,e)}function Xe(e){return Te(e),e.headers=V.from(e.headers),e.data=Ae.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),yt.getAdapter(e.adapter||De.adapter)(e).then(function(r){return Te(e),r.data=Ae.call(e,e.transformResponse,r),r.headers=V.from(r.headers),r},function(r){return mt(r)||(Te(e),r&&r.response&&(r.response.data=Ae.call(e,e.transformResponse,r.response),r.response.headers=V.from(r.response.headers))),Promise.reject(r)})}var Ye=e=>e instanceof V?e.toJSON():e;function ne(e,t){t=t||{};let n={};function r(b,d,l){return a.isPlainObject(b)&&a.isPlainObject(d)?a.merge.call({caseless:l},b,d):a.isPlainObject(d)?a.merge({},d):a.isArray(d)?d.slice():d}function o(b,d,l){if(a.isUndefined(d)){if(!a.isUndefined(b))return r(void 0,b,l)}else return r(b,d,l)}function i(b,d){if(!a.isUndefined(d))return r(void 0,d)}function s(b,d){if(a.isUndefined(d)){if(!a.isUndefined(b))return r(void 0,b)}else return r(void 0,d)}function c(b,d,l){if(l in t)return r(b,d);if(l in e)return r(void 0,b)}let y={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c,headers:(b,d)=>o(Ye(b),Ye(d),!0)};return a.forEach(Object.keys(Object.assign({},e,t)),function(d){let l=y[d]||o,A=l(e[d],t[d],d);a.isUndefined(A)&&l!==c||(n[d]=A)}),n}var bt="1.6.7",_e={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{_e[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var Qe={};_e.transitional=function(t,n,r){function o(i,s){return"[Axios v"+bt+"] Transitional option '"+i+"'"+s+(r?". "+r:"")}return(i,s,c)=>{if(t===!1)throw new E(o(s," has been removed"+(n?" in "+n:"")),E.ERR_DEPRECATED);return n&&!Qe[s]&&(Qe[s]=!0,console.warn(o(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,s,c):!0}};function Wn(e,t,n){if(typeof e!="object")throw new E("options must be an object",E.ERR_BAD_OPTION_VALUE);let r=Object.keys(e),o=r.length;for(;o-- >0;){let i=r[o],s=t[i];if(s){let c=e[i],y=c===void 0||s(c,i,e);if(y!==!0)throw new E("option "+i+" must be "+y,E.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new E("Unknown option "+i,E.ERR_BAD_OPTION)}}var Pe={assertOptions:Wn,validators:_e},Y=Pe.validators,re=class{constructor(t){this.defaults=t,this.interceptors={request:new We,response:new We}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;let i=o.stack?o.stack.replace(/^.+\n/,""):"";r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ne(this.defaults,n);let{transitional:r,paramsSerializer:o,headers:i}=n;r!==void 0&&Pe.assertOptions(r,{silentJSONParsing:Y.transitional(Y.boolean),forcedJSONParsing:Y.transitional(Y.boolean),clarifyTimeoutError:Y.transitional(Y.boolean)},!1),o!=null&&(a.isFunction(o)?n.paramsSerializer={serialize:o}:Pe.assertOptions(o,{encode:Y.function,serialize:Y.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=i&&a.merge(i.common,i[n.method]);i&&a.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),n.headers=V.concat(s,i);let c=[],y=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(n)===!1||(y=y&&f.synchronous,c.unshift(f.fulfilled,f.rejected))});let b=[];this.interceptors.response.forEach(function(f){b.push(f.fulfilled,f.rejected)});let d,l=0,A;if(!y){let h=[Xe.bind(this),void 0];for(h.unshift.apply(h,c),h.push.apply(h,b),A=h.length,d=Promise.resolve(n);l<A;)d=d.then(h[l++],h[l++]);return d}A=c.length;let v=n;for(l=0;l<A;){let h=c[l++],f=c[l++];try{v=h(v)}catch(T){f.call(this,T);break}}try{d=Xe.call(this,v)}catch(h){return Promise.reject(h)}for(l=0,A=b.length;l<A;)d=d.then(b[l++],b[l++]);return d}getUri(t){t=ne(this.defaults,t);let n=gt(t.baseURL,t.url);return dt(n,t.params,t.paramsSerializer)}};a.forEach(["delete","get","head","options"],function(t){re.prototype[t]=function(n,r){return this.request(ne(r||{},{method:t,url:n,data:(r||{}).data}))}});a.forEach(["post","put","patch"],function(t){function n(r){return function(i,s,c){return this.request(ne(c||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:s}))}}re.prototype[t]=n(),re.prototype[t+"Form"]=n(!0)});var me=re,le=class{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});let r=this;this.promise.then(o=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](o);r._listeners=null}),this.promise.then=o=>{let i,s=new Promise(c=>{r.subscribe(c),i=c}).then(o);return s.cancel=function(){r.unsubscribe(i)},s},t(function(i,s,c){r.reason||(r.reason=new ue(i,s,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new le(function(o){t=o}),cancel:t}}},Vn=le;function Kn(e){return function(n){return e.apply(null,n)}}function Gn(e){return a.isObject(e)&&e.isAxiosError===!0}var Ne={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ne).forEach(([e,t])=>{Ne[t]=e});var Xn=Ne;function wt(e){let t=new me(e),n=Ze(me.prototype.request,t);return a.extend(n,me.prototype,t,{allOwnKeys:!0}),a.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return wt(ne(e,o))},n}var O=wt(De);O.Axios=me;O.CanceledError=ue;O.CancelToken=Vn;O.isCancel=mt;O.VERSION=bt;O.toFormData=we;O.AxiosError=E;O.Cancel=O.CanceledError;O.all=function(t){return Promise.all(t)};O.spread=Kn;O.isAxiosError=Gn;O.mergeConfig=ne;O.AxiosHeaders=V;O.formToJSON=e=>ht(a.isHTMLForm(e)?new FormData(e):e);O.getAdapter=yt.getAdapter;O.HttpStatusCode=Xn;O.default=O;Et.exports=O});async function nr({registerHook:e,peertubeHelpers:t,registerVideoField:n,registerClientRoute:r}){let o=St(),{notifier:i}=t,s=await t.getBaseRouterRoute(),c,y,b,d,l,A,v="PeerTuber",h,f,T,C,z,H,Fe,Rt,Ee,Yn=!1,xt,Qn,Zn;e({target:"action:video-watch.player.loaded",handler:async({player:u,video:g})=>{l&&console.log("\u{1F6A7}\u{1F6A7} video",g);let p;u.el()?(p=u.el().getElementsByTagName("video")[0],l&&console.log("\u{1F6A7}\u{1F6A7}videoEl",p)):p-{time:0},location.instance!=g.originInstanceHost&&(C=g.originInstanceHost),console.log("\u{1F6A7}\u{1F6A7}looking for permanent live info",g.isLive),g.isLive?Ee=g.uuid+"_"+g.publishedAt.toISOString():Ee=g.uuid,Rt=g.channel.id,h=g.byAccount,f=g.byVideoChannel,T=g.uuid;let w=g.name,K,$=Ee,S=g.channel.displayName,I=document.getElementById("plugin-placeholder-player-next"),Z=document.getElementsByClassName("root-header-right")[0],G=document.createElement("div");var x;if(c&&(x=x+' <button _ngcontent-vww-c178="" id = "bigchat" type="button" class="peertube-button orange-button ng-star-inserted" hidden="true">\u25BC</button>',x=x+' <button _ngcontent-vww-c178="" id = "smallchat" type="button" class="peertube-button orange-button ng-star-inserted" hidden="true">\u25B2</button>',x=x+' <button _ngcontent-vww-c178="" id = "closechat" type="button" class="peertube-button orange-button ng-star-inserted" title="open chat panel">Chat</button>'),x&&(G.innerHTML=x,I.appendChild(G)),c){let F=document.createElement("div");F.setAttribute("id","peertube-plugin-irc-container"),F.setAttribute("hidden","true"),I.append(F);var R=document.getElementById("peertube-plugin-irc-container");R||logger.error("Cant found the irc chat container.");let m=await At(f);if(l&&console.log("\u{1F6A7}found chat room",m),!m){let D=C.split(".")[0];D=D.split(" ")[0];let vt=f.split("@")[0];m="irc://irc.rizon.net/"+D+"-"+vt,await Ue(f,m)}let W="https://kiwiirc.com/nextclient/#"+m+"?nick="+v+"&autoconnect=true&startupscreen=welcome";v==="PeerTuber"&&(W=W+"???"),R.setAttribute("style","display:flex"),R.setAttribute("style","height:100%;width:100%;resize:both;display:flex;flex-direction:column;overflow:auto");let ee=document.createElement("iframe");ee.setAttribute("src",W),ee.setAttribute("sandbox","allow-same-origin allow-scripts allow-popups allow-forms"),ee.setAttribute("frameborder","0"),ee.setAttribute("id","peertube-plugin-irc-iframe"),R.append(ee);let k=document.getElementById("peertube-plugin-irc-iframe");k.setAttribute("style","height:100%"),k.style.height="100%",k.style.width="100%",k.style.display="flex",k.style.flexDirection="column",k.style.resize="both",k.style.overflow="auto",k.contentWindow.kiwiconfig=()=>{console.log("\u{1F6A7}\u2588\u2588\u2588kiwi config called ")};let fe=k.contentWindow.document.getElementsByTagName("body"),P=document.createElement("div");P.innerHTML='<script name="kiwiconfig">{"startupScreen": "welcome", "startupOptions": { "server": "irc.freenode.net", "port": 6697, "tls": true, "direct": false, "nick": "specialk" "autoConnect": true }}<\/script>',fe[0].appendChild(P)}let j=document.getElementById("bigchat");j&&(j.title="increase chat window height",j.onclick=async function(){R.style.height=R.offsetHeight+512+"px"});let X=document.getElementById("smallchat");X&&(X.title="Decrease chat window height",X.onclick=async function(){R.style.height=R.offsetHeight-512+"px"});let B=document.getElementById("closechat"),L=document.getElementById("videojs-wrapper"),de=document.getElementById("video-wrapper");var se,J;B&&(B.onclick=async function(){l&&(console.log("\u{1F6A7}clicked",B.innerHTML,L.hidden,R.hidden),console.log("\u{1F6A7}width",R.clientWidth,L.clientWidth,de.clientWidth),console.log("\u{1F6A7}height",R.clientheight,L.clientHeight)),B.innerHTML==="Full Chat"?(B.title="Close chat window",R.hidden=!1,se=L.clientWidth,L.hidden=!0,B.innerHTML="X",R.style.flexGrow="1",R.style.flex="wrap",j.hidden=!1,X.hidden=!1):B.innerHTML==="Chat"?(B.title="make chat full screen",R.hidden=!1,L.hidden=!1,B.innerHTML="Full Chat",j.hidden=!1,X.hidden=!1,R.clientHeight<640&&(R.style.height="640px")):B.innerHTML==="X"&&(R.hidden=!0,L.hidden=!1,B.innerHTML="Chat",j.hidden=!0,X.hidden=!0,B.title="open chat panel"),l&&(console.log("\u{1F6A7}after click",B.innerHTML,L.hidden,R.hidden),console.log(R,L))})}}),e({target:"action:video-channel-videos.video-channel.loaded",handler:async(u,g)=>{l&&console.log("\u{1F6A7} chanel loaded result ",u,"params:",g);let p=document.getElementsByClassName("channel-buttons"),w=document.createElement("div");return u}}),e({target:"action:video-edit.init",handler:async({type:u,updateForm:g})=>{let p,w=document.getElementById("itemtxt");console.log("\u{1F6A7}type and update form!",u,g,w)}}),e({target:"action:router.navigation-end",handler:async({params:u,user:g})=>{let p=document.getElementsByClassName("video-channels-header");if(console.log("\u{1F6A7}navigation end",p),p.length>0){console.log("\u{1F6A7} found it!",p.length);var w=document.createElement("a");w.innerHTML='<a  class="peertube-create-button" href="/p/podcast2/import"><my-global-icon _ngcontent-ng-c287775211="" iconname="add" aria-hidden="true" _nghost-ng-c1540792725=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg></my-global-icon>Import Podcast<!----></a>',p[0].appendChild(w)}}}),e({target:"action:video-channel-update.video-channel.loaded",handler:async u=>{l&&console.log("\u{1F6A7}channel update loaded",u),T=void 0;let g=document.getElementsByClassName("form-group"),p=window.location.href.split("/").pop();f=p,l&&console.log("\u{1F6A7}channel info located",p,f);let w=await He(p),K=await Ot(p),$=[""],S=await Ct(p),I,Z,G;l&&console.log("\u{1F6A7}pod data",w,K,$,S),S||(S={feedid:w,feedguid:K,medium:"podcast",channel:p,category:"news",image:"https://www.peppercarrot.com/0_sources/0ther/framasoft/hi-res/2020-05-21_Peertube-Research_by-David-Revoy.jpg"},S.text=$),S&&S.email?I=S.email:I="",S.text||(S.text=$),S.category?Z=S.category:(Z="news",S.category=Z),S.image?G=S.image:(G="https://www.peppercarrot.com/0_sources/0ther/framasoft/hi-res/2020-05-21_Peertube-Research_by-David-Revoy.jpg",S.image=G);let x=S,R=await Bt(p);xt=R,g[0].appendChild(R);let j=document.getElementById("id");if(j){j.value=w;let J=document.getElementById("update-feed");J&&(J.onclick=async function(){Tt(p,j.value),J.innerText="Saved!"})}let X=document.getElementById("chatroom"),B=document.getElementById("update-chat");B&&(B.onclick=async function(){Ue(p,X.value),B.innerText="Saved!"});let L=document.getElementById("rss-clone");L&&(L.onclick=async function(){let J="https://"+window.location.hostname+"/plugins/podcast2/router/dirtyhack?avater="+cloneChannel,F=await t.getAuthHeader();console.log("trying to hack",F,J,cloneChannel);try{console.log(await o.put(J,{bear:F},{headers:F}))}catch(m){console.log("error sending request",m,J,cloneChannel)}});let de=document.getElementById("rss-settings"),se;de&&(de.onclick=async function(){let J,F;S.redirectUrl?F=S.redirectUrl:F="";let m=`Audio podcast Feed: ${window.location.protocol}//${window.location.hostname}/plugins/podcast2/router/podcast2?channel=${p}<br>`;m=m+'<br><button id="rss-link" class="peertube-button orange-button ng-star-inserted">RSS Feed</button>',w?m=m+"Podcast Index Feed ID: "+w:m=m+'<a href="https://podcastindex.org/add?feed='+encodeURIComponent("https://"+window.location.hostname+"/plugins/podcast2/router/podcast2?channel="+p)+'"<button id="button-register-feed" class="peertube-button orange-button ng-star-inserted" title = "For full Boostagram functionality on sites like saturn.fly.dev and conshax.app you will need to register your channel">register with Podcast Index</button></a>',m=m+"<h3>Settings for legacy index compatibility</h3>",m=m+"<br>Podcast E-mail Address: ",m=m+`<input type="text" id="email" width="40" value="${I}">`,m=m+"<br>itunes category: ",m=m+`<input type="text" id="category" width="40" value="${Z}">`,m=m+"<br>itunes large image path: ",m=m+`<input type="text" id="image" width="80" value="${G}">`,m=m+"<br><hr><h3>Podcasting 2.0 settings</h3>",m=m+"<br>Channel GUID: ",m=m+'<input STYLE="color: #000000; background-color: #ffffff;"type="text" id="channel-guid" width="40" value="'+K+'">',m=m+'<br>Podcast Medium <select id="feed-medium"><option value="podcast">podcast </option><option value="music">music </option><option value="video">video </option><option value="film">film </option><option value="audiobook">audiobook </option></select>';for(var W=0;W<S.text.length;W++)m=m+"<br>Podcast txt value "+W+": ",m=m+'<input STYLE="color: #000000; background-color: #ffffff;"type="text" id="feed-txt-'+W+'" width="40" value="'+S.text[W]+'">';m=m+"<br><hr>Danger - only use when moving podcast to new hosting provider. Creates 301 redirect to replacement feed",m=m+'<br><input type="checkbox" id="redirect-enabled" name="redirect-enabled"> migrate podcast to ',m=m+`<input STYLE="color: #000000; background-color: #ffffff;"type="text" id="redirect-url" value="${F}"><br>`;let ee=await t.showModal({title:"RSS settings "+p,content:"",close:!0,confirm:{value:"save",action:async()=>{clearInterval(se),l&&console.log("\u{1F6A7} saving pod data",x);try{await o.post(s+"/setpoddata",x,{headers:await t.getAuthHeader()})}catch(P){console.log("\u{1F6A7} hard error attempting to update pod data",x,P)}}}}),k=document.getElementsByClassName("modal-body");if(k){switch(k[0].setAttribute("sandbox","allow-same-origin allow-scripts allow-popups allow-forms"),k[0].innerHTML=m,S.medium){case"podcast":document.getElementById("feed-medium").selectedIndex=0;break;case"music":document.getElementById("feed-medium").selectedIndex=1;break;case"film":document.getElementById("feed-medium").selectedIndex=2;break;case"video":document.getElementById("feed-medium").selectedIndex=3;break;case"audiobook":document.getElementById("feed-medium").selectedIndex=4;break;default:console.log("\u{1F6A7}unable to find a match for podData.medium")}document.getElementById("redirect-enabled").checked=S.redirectEnabled}let Se=document.getElementById("rss-link");Se&&(Se.onclick=async function(){let P=window.location.protocol+"//"+window.location.hostname+"/plugins/podcast2/router/podcast2?channel="+p;l&&console.log("\u{1F6A7}rss link",P),window.open(P)}),se=setInterval(async function(){try{x.feedguid=document.getElementById("channel-guid").value,x.medium=document.getElementById("feed-medium").value,x.image=document.getElementById("image").value,G=x.image,x.category=document.getElementById("category").value,Z=x.category;let D=document.getElementById("email").value;D&&D.indexOf("@")>0&&(x.email=D,I=D),D&&D==""&&(x.email=void 0,I=D),x.redirectEnabled=document.getElementById("redirect-enabled").checked,x.redirectUrl=document.getElementById("redirect-url").value;for(var P=0;P<$.length;P++)S.text[P]=document.getElementById("feed-txt-"+P).value}catch(D){clearInterval(se)}},500);let fe=document.getElementById("register-feed");fe&&(fe.onclick=async function(){let P="https://podcastindex.org/add?feed="+w;window.open(P)})})}}),r({route:"podcast2/import",onMount:async({rootEl:u})=>{u.innerHTML=`<div id="podcast2-import"><center><h1>Import Podcast</h1></center>
      Podcast RSS Url:<input class="form-control d-block ng-pristine ng-valid ng-touched" type="text" id="podcast2-import-url">
      <button id = "podcast2-import-button" class="peertube-button orange-button ng-star-inserted">Import</button>
      `;let g=document.getElementById("podcast2-import-button"),p=document.getElementById("podcast2-import-url");g?g.onclick=async function(){let w;if(p){if(console.log("importing channel",p.value),w=p.value,w&&w.length>1){w=w,w.includes("http")||(w="https://"+w);let K="https://"+window.location.hostname+"/plugins/podcast2/router/importchannel?clone="+w,$=await t.getAuthHeader();console.log("trying to import",$,K,w);let S;try{S=await o.put(K,{bear:$},{headers:$})}catch(I){console.log("error sending request",I,K,w,I.message,I.data.message),i.error("failed trying to import ")}console.log("importing returned message",S),S&&window.location.replace(S.data)}}else console.log("no import url")}:console.log("no import button")}});let Q={tab:"plugin-settings"},N={name:"seasonnode",label:"Season number",descriptionHTML:"which season this episode belongs to",type:"input",default:""};for(let u of["upload","import-url","import-torrent","update","go-live"])n(N,U({type:u},Q));N={name:"seasonname",label:"Season descriptive name",descriptionHTML:"Display name of this season",type:"input",default:""};for(let u of["upload","import-url","import-torrent","update","go-live"])n(N,U({type:u},Q));N={name:"episodenode",label:"Episode number",descriptionHTML:"episode number in season",type:"input",default:""};for(let u of["upload","import-url","import-torrent","update","go-live"])n(N,U({type:u},Q));N={name:"episodename",label:"Episode descriptive name",descriptionHTML:"Display name of this episode",type:"input",default:""};for(let u of["upload","import-url","import-torrent","update","go-live"])n(N,U({type:u},Q));N={name:"chapters",label:"Chapter file",descriptionHTML:"URL for chapter file",type:"input",default:""};for(let u of["upload","import-url","import-torrent","update","go-live"])n(N,U({type:u},Q));N={name:"itemtxt",label:"arbitrary text",descriptionHTML:"arbitrary text string for item",type:"input",default:""};for(let u of["upload","import-url","import-torrent","update","go-live"])n(N,U({type:u},Q));N={name:"sourceid",label:"YouTube ID",descriptionHTML:"ID of original youtube video",type:"input",default:""};for(let u of["upload","import-url","import-torrent","update","go-live"])n(N,U({type:u},Q));await t.getSettings().then(u=>{c=u["irc-enable"],l=u["debug-enable"],A=u["rss-enable"],console.log("\u{1F6A7}settings",u)}),t.getServerConfig().then(u=>{l&&console.log("\u{1F6A7}Fetched server config.",u),C=u.instance.name});try{let u=await o.get(s+"/getversion");u&&u.data&&(H=u.data)}catch(u){console.log("\u{1F6A7}error getting software version",s,u)}async function At(u){if(l&&console.log("\u{1F6A7}getting chat room",u,s,c),!c)return;let g=s+"/getchatroom?channel="+u;try{let p=await o.get(g);if(p)return p.data}catch(p){return}}async function Ue(u,g){if(l&&console.log("\u{1F6A7}getting chat room",u,g,c),!c)return;let p=s+"/setchatroom?channel="+u+"&chatroom="+encodeURIComponent(g);try{await o.get(p)}catch(w){console.log("\u{1F6A7}error attempting to set chatroom",w,u,g)}}async function He(u){let g=s+"/getfeedid?channel="+u;try{let p=await o.get(g);if(p)return p.data}catch(p){return}}async function Tt(u,g){let p=s+"/setfeedid?channel="+u+"&feedid="+g;try{await o.get(p)}catch(w){console.log("\u{1F6A7}error attempting to fetch feed id",w)}}async function Ot(u){let g,p=s+"/getchannelguid?channel="+u;try{if(g=await o.get(p),g)return l&&console.log("\u{1F6A7}guid from guid api",g),g.data}catch(w){console.log("\u{1F6A7}error getting channel guid",p,w)}}async function Ct(u){let g,p=s+"/getpoddata?channel="+u;try{if(g=await o.get(p),g)return g.data}catch(w){console.log("\u{1F6A7}error getting pod Data",p,w)}}async function Bt(u){let g=await He(u);l&&console.log("\u{1F6A7}getting config panel",g,u);let p='<br><label _ngcontent-msy-c247="" for="pod">Podcast Settings</label><br>';A&&(p=p+"<hr>",p=p+'<button type="button" id="rss-settings" name="ress-settings" class="peertube-button orange-button ng-star-inserted">Podcasting 2.0 RSS settings</button>'),p=p+"<hr>";let w=document.createElement("div");return w.setAttribute("class","podcast2-button"),w.setAttribute("sandbox","allow-same-origin allow-scripts allow-popups allow-forms"),w.innerHTML=p,w}}export{nr as register};
